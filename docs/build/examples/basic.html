<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>基础示例 · 电力系统建模与分析工具集</title><meta name="title" content="基础示例 · 电力系统建模与分析工具集"/><meta property="og:title" content="基础示例 · 电力系统建模与分析工具集"/><meta property="twitter:title" content="基础示例 · 电力系统建模与分析工具集"/><meta name="description" content="Documentation for 电力系统建模与分析工具集."/><meta property="og:description" content="Documentation for 电力系统建模与分析工具集."/><meta property="twitter:description" content="Documentation for 电力系统建模与分析工具集."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../index.html">首页</a></li><li><a class="tocitem" href="../getting_started.html">入门指南</a></li><li><span class="tocitem">API参考</span><ul><li><a class="tocitem" href="../api/overview.html">概述</a></li><li><a class="tocitem" href="../api/component_model.html">ComponentModel模块</a></li><li><a class="tocitem" href="../api/power_flow.html">PowerFlow模块</a></li><li><a class="tocitem" href="../api/utils.html">Utils模块</a></li><li><a class="tocitem" href="../api/time_series_power_flow.html">TimeSeriesPowerFlow模块</a></li></ul></li><li><span class="tocitem">函数说明</span><ul><li><a class="tocitem" href="../functions/component_functions.html">组件函数</a></li><li><a class="tocitem" href="../functions/power_flow_functions.html">潮流计算函数</a></li><li><a class="tocitem" href="../functions/utils_functions.html">工具函数</a></li><li><a class="tocitem" href="../functions/time_series_functions.html">时序潮流函数</a></li></ul></li><li><a class="tocitem" href="../main.html">主程序说明</a></li><li><span class="tocitem">示例</span><ul><li class="is-active"><a class="tocitem" href="basic.html">基础示例</a><ul class="internal"><li><a class="tocitem" href="#安装与导入"><span>安装与导入</span></a></li><li><a class="tocitem" href="#基础潮流计算"><span>基础潮流计算</span></a></li><li><a class="tocitem" href="#结果分析与可视化"><span>结果分析与可视化</span></a></li><li><a class="tocitem" href="#系统修改与重新计算"><span>系统修改与重新计算</span></a></li><li><a class="tocitem" href="#时间序列潮流计算"><span>时间序列潮流计算</span></a></li><li><a class="tocitem" href="#辅助功能应用"><span>辅助功能应用</span></a></li><li><a class="tocitem" href="#混合交直流系统分析"><span>混合交直流系统分析</span></a></li><li><a class="tocitem" href="#结论"><span>结论</span></a></li></ul></li><li><a class="tocitem" href="power_flow.html">潮流计算示例</a></li><li><a class="tocitem" href="time_series.html">时序潮流示例</a></li><li><a class="tocitem" href="visualization.html">可视化示例</a></li></ul></li><li><a class="tocitem" href="../development.html">开发指南</a></li><li><a class="tocitem" href="../faq.html">常见问题</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">示例</a></li><li class="is-active"><a href="basic.html">基础示例</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="basic.html">基础示例</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Matrixeigs/DistributionPowerFlow" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Matrixeigs/DistributionPowerFlow/blob/master/docs/src/examples/basic.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Distribution-PowerFlow-库基础示例"><a class="docs-heading-anchor" href="#Distribution-PowerFlow-库基础示例">Distribution PowerFlow 库基础示例</a><a id="Distribution-PowerFlow-库基础示例-1"></a><a class="docs-heading-anchor-permalink" href="#Distribution-PowerFlow-库基础示例" title="Permalink"></a></h1><p>本文档提供了 PowerFlow 库的基础使用示例，涵盖了从简单的潮流计算到时间序列分析的典型应用场景。这些示例旨在帮助新用户快速上手并理解库的核心功能。</p><h2 id="安装与导入"><a class="docs-heading-anchor" href="#安装与导入">安装与导入</a><a id="安装与导入-1"></a><a class="docs-heading-anchor-permalink" href="#安装与导入" title="Permalink"></a></h2><p>首先，我们需要安装并导入 PowerFlow 库及其相关模块：</p><pre><code class="language-julia hljs"># 安装库（仅需执行一次）
using Pkg
Pkg.add(&quot;PowerFlow&quot;)

# 导入所需模块
using PowerFlow
using TimeSeriesPowerFlow
using Utils
using ComponentModel</code></pre><h2 id="基础潮流计算"><a class="docs-heading-anchor" href="#基础潮流计算">基础潮流计算</a><a id="基础潮流计算-1"></a><a class="docs-heading-anchor-permalink" href="#基础潮流计算" title="Permalink"></a></h2><h3 id="加载案例数据"><a class="docs-heading-anchor" href="#加载案例数据">加载案例数据</a><a id="加载案例数据-1"></a><a class="docs-heading-anchor-permalink" href="#加载案例数据" title="Permalink"></a></h3><p>PowerFlow 支持多种格式的电力系统案例数据，包括 MATPOWER 格式的 <code>.m</code> 文件：</p><pre><code class="language-julia hljs"># 加载标准 IEEE 14 节点测试系统
case = load_case(&quot;case14.m&quot;)

# 查看案例基本信息
println(&quot;系统包含 $(length(case.bus)) 个母线和 $(length(case.branch)) 条支路&quot;)</code></pre><h3 id="执行交流潮流计算"><a class="docs-heading-anchor" href="#执行交流潮流计算">执行交流潮流计算</a><a id="执行交流潮流计算-1"></a><a class="docs-heading-anchor-permalink" href="#执行交流潮流计算" title="Permalink"></a></h3><p>最基本的功能是执行交流潮流计算：</p><pre><code class="language-julia hljs"># 使用默认参数执行交流潮流计算
results = runpf(case)

# 检查计算是否收敛
if results.success
    println(&quot;潮流计算成功收敛！&quot;)
else
    println(&quot;潮流计算未收敛，请检查系统参数&quot;)
end

# 查看计算结果摘要
println(&quot;系统总负荷: $(sum(results.bus[:, PD])) MW&quot;)
println(&quot;系统总损耗: $(sum(results.branch[:, PL])) MW&quot;)</code></pre><h3 id="自定义计算选项"><a class="docs-heading-anchor" href="#自定义计算选项">自定义计算选项</a><a id="自定义计算选项-1"></a><a class="docs-heading-anchor-permalink" href="#自定义计算选项" title="Permalink"></a></h3><p>可以通过选项字典自定义潮流计算的参数：</p><pre><code class="language-julia hljs"># 设置自定义计算选项
opt = Dict(
    &quot;pf_alg&quot; =&gt; &quot;NR&quot;,        # 使用牛顿-拉夫森法
    &quot;pf_tol&quot; =&gt; 1e-6,        # 收敛容差
    &quot;max_it&quot; =&gt; 30,          # 最大迭代次数
    &quot;verbose&quot; =&gt; 1           # 输出详细信息
)

# 使用自定义选项执行潮流计算
results = runpf(case, opt)</code></pre><h3 id="执行直流潮流计算"><a class="docs-heading-anchor" href="#执行直流潮流计算">执行直流潮流计算</a><a id="执行直流潮流计算-1"></a><a class="docs-heading-anchor-permalink" href="#执行直流潮流计算" title="Permalink"></a></h3><p>对于某些应用，直流潮流计算提供了更快的近似解：</p><pre><code class="language-julia hljs"># 执行直流潮流计算
dc_results = rundcpf(case)

# 比较直流和交流潮流计算结果
println(&quot;交流潮流计算的系统总损耗: $(sum(results.branch[:, PL])) MW&quot;)
println(&quot;直流潮流计算的系统总损耗: $(sum(dc_results.branch[:, PL])) MW&quot;)</code></pre><h2 id="结果分析与可视化"><a class="docs-heading-anchor" href="#结果分析与可视化">结果分析与可视化</a><a id="结果分析与可视化-1"></a><a class="docs-heading-anchor-permalink" href="#结果分析与可视化" title="Permalink"></a></h2><h3 id="电压分析"><a class="docs-heading-anchor" href="#电压分析">电压分析</a><a id="电压分析-1"></a><a class="docs-heading-anchor-permalink" href="#电压分析" title="Permalink"></a></h3><p>分析系统中的电压分布：</p><pre><code class="language-julia hljs"># 提取电压幅值和相角
vm = results.bus[:, VM]
va = results.bus[:, VA]

# 查找最高和最低电压
max_vm_idx = argmax(vm)
min_vm_idx = argmin(vm)

println(&quot;最高电压: $(vm[max_vm_idx]) pu，位于母线 $(results.bus[max_vm_idx, BUS_I])&quot;)
println(&quot;最低电压: $(vm[min_vm_idx]) pu，位于母线 $(results.bus[min_vm_idx, BUS_I])&quot;)

# 绘制电压分布图
using Plots
bar(results.bus[:, BUS_I], vm, 
    title=&quot;母线电压分布&quot;, 
    xlabel=&quot;母线编号&quot;, 
    ylabel=&quot;电压幅值(pu)&quot;,
    legend=false)</code></pre><h3 id="支路功率流分析"><a class="docs-heading-anchor" href="#支路功率流分析">支路功率流分析</a><a id="支路功率流分析-1"></a><a class="docs-heading-anchor-permalink" href="#支路功率流分析" title="Permalink"></a></h3><p>分析系统中的功率流分布：</p><pre><code class="language-julia hljs"># 提取支路有功功率流
branch_flow = results.branch[:, PF]
branch_from = results.branch[:, F_BUS]
branch_to = results.branch[:, T_BUS]

# 找出功率流最大的支路
max_flow_idx = argmax(abs.(branch_flow))
println(&quot;最大功率流: $(branch_flow[max_flow_idx]) MW，位于支路 $(branch_from[max_flow_idx])-$(branch_to[max_flow_idx])&quot;)

# 绘制功率流分布图
bar(1:length(branch_flow), abs.(branch_flow),
    title=&quot;支路功率流分布&quot;,
    xlabel=&quot;支路编号&quot;,
    ylabel=&quot;功率流大小(MW)&quot;,
    legend=false)</code></pre><h2 id="系统修改与重新计算"><a class="docs-heading-anchor" href="#系统修改与重新计算">系统修改与重新计算</a><a id="系统修改与重新计算-1"></a><a class="docs-heading-anchor-permalink" href="#系统修改与重新计算" title="Permalink"></a></h2><h3 id="修改负荷"><a class="docs-heading-anchor" href="#修改负荷">修改负荷</a><a id="修改负荷-1"></a><a class="docs-heading-anchor-permalink" href="#修改负荷" title="Permalink"></a></h3><p>模拟负荷变化并重新计算潮流：</p><pre><code class="language-julia hljs"># 保存原始负荷数据
original_load = copy(case.bus[:, PD])

# 增加所有负荷20%
case.bus[:, PD] *= 1.2

# 重新计算潮流
new_results = runpf(case)

# 比较结果
println(&quot;原始总负荷: $(sum(original_load)) MW&quot;)
println(&quot;修改后总负荷: $(sum(case.bus[:, PD])) MW&quot;)
println(&quot;原始总损耗: $(sum(results.branch[:, PL])) MW&quot;)
println(&quot;修改后总损耗: $(sum(new_results.branch[:, PL])) MW&quot;)

# 恢复原始负荷
case.bus[:, PD] = original_load</code></pre><h3 id="修改发电机出力"><a class="docs-heading-anchor" href="#修改发电机出力">修改发电机出力</a><a id="修改发电机出力-1"></a><a class="docs-heading-anchor-permalink" href="#修改发电机出力" title="Permalink"></a></h3><p>调整发电机出力并观察系统响应：</p><pre><code class="language-julia hljs"># 保存原始发电机数据
original_gen = copy(case.gen)

# 修改特定发电机的出力
gen_idx = 1  # 第一台发电机
original_pg = case.gen[gen_idx, PG]
case.gen[gen_idx, PG] *= 0.8  # 降低到原来的80%

# 重新计算潮流
gen_results = runpf(case)

# 比较结果
println(&quot;发电机 $(case.gen[gen_idx, GEN_BUS]) 原始出力: $(original_pg) MW&quot;)
println(&quot;发电机 $(case.gen[gen_idx, GEN_BUS]) 修改后出力: $(case.gen[gen_idx, PG]) MW&quot;)
println(&quot;平衡节点原始出力: $(results.gen[findall(x -&gt; x == 3, results.bus[:, BUS_TYPE])[1], PG]) MW&quot;)
println(&quot;平衡节点修改后出力: $(gen_results.gen[findall(x -&gt; x == 3, gen_results.bus[:, BUS_TYPE])[1], PG]) MW&quot;)

# 恢复原始发电机数据
case.gen = original_gen</code></pre><h2 id="时间序列潮流计算"><a class="docs-heading-anchor" href="#时间序列潮流计算">时间序列潮流计算</a><a id="时间序列潮流计算-1"></a><a class="docs-heading-anchor-permalink" href="#时间序列潮流计算" title="Permalink"></a></h2><h3 id="基本时间序列分析"><a class="docs-heading-anchor" href="#基本时间序列分析">基本时间序列分析</a><a id="基本时间序列分析-1"></a><a class="docs-heading-anchor-permalink" href="#基本时间序列分析" title="Permalink"></a></h3><p>执行一天的时间序列潮流计算：</p><pre><code class="language-julia hljs"># 准备负荷数据文件
# load_data.xlsx 应包含24小时的负荷数据

# 执行时间序列潮流计算
ts_results = runtdpf(case, &quot;load_data.xlsx&quot;)

# 检查计算是否成功
success_count = sum(ts_results.success)
println(&quot;成功计算的时间点数量: $success_count / $(length(ts_results.time_points))&quot;)

# 绘制总负荷随时间的变化
time_hours = ts_results.time_points
total_load = [sum(result.bus[:, PD]) for result in ts_results.bus_results]

plot(time_hours, total_load,
     title=&quot;系统总负荷随时间变化&quot;,
     xlabel=&quot;时间(小时)&quot;,
     ylabel=&quot;总负荷(MW)&quot;,
     marker=:circle,
     legend=false)</code></pre><h3 id="包含可再生能源的时间序列分析"><a class="docs-heading-anchor" href="#包含可再生能源的时间序列分析">包含可再生能源的时间序列分析</a><a id="包含可再生能源的时间序列分析-1"></a><a class="docs-heading-anchor-permalink" href="#包含可再生能源的时间序列分析" title="Permalink"></a></h3><p>执行包含光伏发电的时间序列潮流计算：</p><pre><code class="language-julia hljs"># 准备光照强度数据文件
# irradiance_data.xlsx 应包含24小时的光照强度数据

# 执行包含光照数据的时间序列潮流计算
pv_results = runtdpf(case, &quot;load_data.xlsx&quot;, &quot;irradiance_data.xlsx&quot;)

# 分析光伏发电输出
plot_time_day = 1  # 分析第一天的数据

# 绘制电压分析图
plot_voltage_time_series(pv_results, case, plot_time_day)

# 绘制系统损耗分析图
plot_losses_time_series(pv_results, case, plot_time_day)</code></pre><h3 id="动态经济调度"><a class="docs-heading-anchor" href="#动态经济调度">动态经济调度</a><a id="动态经济调度-1"></a><a class="docs-heading-anchor-permalink" href="#动态经济调度" title="Permalink"></a></h3><p>执行考虑电价的动态经济调度：</p><pre><code class="language-julia hljs"># 准备电价数据文件
# price_data.xlsx 应包含24小时的电价数据

# 设置动态调度选项
dispatch_opt = Dict(&quot;mode&quot; =&gt; &quot;dynamic_dispatch&quot;)

# 执行动态经济调度计算
dispatch_results = runtdpf(case, &quot;load_data.xlsx&quot;, &quot;irradiance_data.xlsx&quot;, &quot;price_data.xlsx&quot;, dispatch_opt)

# 分析调度结果
plot_PD_time_series(dispatch_results, case, 1)

# 分析功率流越限情况
flow_violations = plot_flow_violations(dispatch_results, case, 1, 3.0)</code></pre><h2 id="辅助功能应用"><a class="docs-heading-anchor" href="#辅助功能应用">辅助功能应用</a><a id="辅助功能应用-1"></a><a class="docs-heading-anchor-permalink" href="#辅助功能应用" title="Permalink"></a></h2><h3 id="内部/外部编号转换"><a class="docs-heading-anchor" href="#内部/外部编号转换">内部/外部编号转换</a><a id="内部/外部编号转换-1"></a><a class="docs-heading-anchor-permalink" href="#内部/外部编号转换" title="Permalink"></a></h3><p>处理系统中的编号转换：</p><pre><code class="language-julia hljs"># 转换为内部编号
internal_case, i2e = ext2int(case)

# 执行潮流计算
internal_results = runpf(internal_case)

# 转换回外部编号
external_results = int2ext(i2e, internal_results)

# 验证转换结果
println(&quot;内部编号的母线数量: $(size(internal_results.bus, 1))&quot;)
println(&quot;外部编号的母线数量: $(size(external_results.bus, 1))&quot;)</code></pre><h3 id="孤岛识别与提取"><a class="docs-heading-anchor" href="#孤岛识别与提取">孤岛识别与提取</a><a id="孤岛识别与提取-1"></a><a class="docs-heading-anchor-permalink" href="#孤岛识别与提取" title="Permalink"></a></h3><p>识别系统中的孤岛：</p><pre><code class="language-julia hljs"># 创建包含孤岛的测试系统
test_case = copy(case)

# 断开某些线路以创建孤岛
disconnect_branches = [1, 5, 10]
for br_idx in disconnect_branches
    test_case.branch[br_idx, BR_STATUS] = 0
end

# 识别孤岛
islands = find_islands(test_case)
println(&quot;识别到 $(length(islands)) 个孤岛&quot;)

# 提取最大的孤岛
main_island = extract_islands(test_case, islands[1])
println(&quot;主孤岛包含 $(size(main_island.bus, 1)) 个母线&quot;)

# 对主孤岛执行潮流计算
island_results = runpf(main_island)</code></pre><h2 id="混合交直流系统分析"><a class="docs-heading-anchor" href="#混合交直流系统分析">混合交直流系统分析</a><a id="混合交直流系统分析-1"></a><a class="docs-heading-anchor-permalink" href="#混合交直流系统分析" title="Permalink"></a></h2><h3 id="重新编号混合系统"><a class="docs-heading-anchor" href="#重新编号混合系统">重新编号混合系统</a><a id="重新编号混合系统-1"></a><a class="docs-heading-anchor-permalink" href="#重新编号混合系统" title="Permalink"></a></h3><p>处理混合交直流系统：</p><pre><code class="language-julia hljs"># 加载混合交直流系统案例
hybrid_case = load_case(&quot;hybrid_case.m&quot;)

# 重新编号混合系统
renumbered_case = renumber_hybrid_system(hybrid_case)

# 执行混合系统潮流计算
hybrid_results = runpf(renumbered_case)</code></pre><h2 id="结论"><a class="docs-heading-anchor" href="#结论">结论</a><a id="结论-1"></a><a class="docs-heading-anchor-permalink" href="#结论" title="Permalink"></a></h2><p>以上示例展示了 PowerFlow 库的基本用法，包括潮流计算、结果分析、时间序列分析和辅助功能。这些示例可以作为开发更复杂应用的起点，用户可以根据自己的需求进行扩展和定制。</p><p>要了解更多高级功能，请参考其他示例文档和完整的 API 参考文档。</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../main.html">« 主程序说明</a><a class="docs-footer-nextpage" href="power_flow.html">潮流计算示例 »</a><div class="flexbox-break"></div><p class="footer-message">电力系统建模与分析工具集</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Thursday 3 July 2025 23:11">Thursday 3 July 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
